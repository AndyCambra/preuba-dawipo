{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelText as _vModelText, withDirectives as _withDirectives, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, createBlock as _createBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-1fd930b9\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h1\", null, \"Your selected connectors\", -1 /* HOISTED */));\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"Add your customer number\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_6 = [\"onUpdate:modelValue\"];\nconst _hoisted_7 = [\"onClick\"];\nconst _hoisted_8 = [\"onClick\"];\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */));\nconst _hoisted_10 = {\n  key: 1\n};\nconst _hoisted_11 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"p\", null, \"No items selected\", -1 /* HOISTED */));\nconst _hoisted_12 = [_hoisted_11];\nconst _hoisted_13 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, $setup.selectedItems.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.selectedItems, (item, index) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"integration-box\",\n      key: index\n    }, [_createElementVNode(\"div\", null, [_createTextVNode(_toDisplayString(item) + \" \", 1 /* TEXT */), _hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n      type: \"text\",\n      \"onUpdate:modelValue\": $event => $setup.userKeys[index] = $event,\n      placeholder: \"api key\"\n    }, null, 8 /* PROPS */, _hoisted_6), [[_vModelText, $setup.userKeys[index]]]), _createElementVNode(\"button\", {\n      onClick: $event => $setup.deleteItem(index)\n    }, \"Delete Item\", 8 /* PROPS */, _hoisted_7), _createElementVNode(\"button\", {\n      onClick: $event => $setup.deleteData(item)\n    }, \"Delete DB Instance\", 8 /* PROPS */, _hoisted_8)])]);\n  }), 128 /* KEYED_FRAGMENT */)), _hoisted_9, _createElementVNode(\"button\", {\n    onClick: $setup.sendData\n  }, \"Send Data\")])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [..._hoisted_12])), _createElementVNode(\"div\", null, [_createElementVNode(\"button\", {\n    onClick: $setup.getData\n  }, \"Show Data\"), _createElementVNode(\"button\", {\n    onClick: $setup.navigateToHome\n  }, \"Go back Home\"), _createElementVNode(\"button\", {\n    onClick: $setup.proceedToNextPage,\n    disabled: !$setup.data\n  }, \" Go to Dashboard \", 8 /* PROPS */, _hoisted_13)]), $setup.data || $setup.error ? (_openBlock(), _createBlock($setup[\"BackResponse\"], {\n    key: 2,\n    data: $setup.data,\n    error: $setup.error\n  }, null, 8 /* PROPS */, [\"data\", \"error\"])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_hoisted_11","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$setup","selectedItems","length","_hoisted_4","_Fragment","_renderList","item","index","_createTextVNode","_toDisplayString","_hoisted_5","type","$event","userKeys","placeholder","_hoisted_6","onClick","deleteItem","_hoisted_7","deleteData","_hoisted_8","_hoisted_9","sendData","_hoisted_10","_hoisted_12","getData","navigateToHome","proceedToNextPage","disabled","data","_hoisted_13","error","_createBlock","_createCommentVNode"],"sources":["/home/vicente/Cosas/Programacion/prueba-dawipo/frontend/src/Connectors/Pages/SelectedItemsPage.vue"],"sourcesContent":["<script setup>\nimport { ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport BackResponse from \"../../Connectors/Components/BackResponse.vue\";\n\nconst URL_BACK_CONNECTORS = \"http://localhost:3001/connectors\";\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst selectedItems = ref([]);\ntry {\n  selectedItems.value = JSON.parse(route.query.droppedItems) || [];\n} catch (e) {\n  console.error(\"Error parsing droppedItems:\", e);\n}\n\nconst userKeys = ref([]);\nconst data = ref(null);\nconst error = ref(null);\n\nconst sendData = async () => {\n  const payload = selectedItems.value.map((name, index) => ({\n    name,\n    apiKey: userKeys.value[index] || \"\",\n  }));\n\n  try {\n    const response = await axios.put(`${URL_BACK_CONNECTORS}/update`, payload);\n    console.log(response.data);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst getData = async () => {\n  try {\n    const response = await axios.get(URL_BACK_CONNECTORS);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst deleteData = async (item) => {\n  try {\n    const response = await axios.delete(`${URL_BACK_CONNECTORS}/${item}`);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst deleteItem = (index) => {\n  selectedItems.value.splice(index, 1);\n};\n\nconst proceedToNextPage = () => {\n  if (data.value) {\n    router.push({\n      name: \"DashTest\",\n      query: {\n        droppedItems: JSON.stringify(selectedItems.value),\n        userKeys: JSON.stringify(userKeys.value),\n      },\n    });\n  }\n};\n\nconst navigateToHome = () => {\n  router.push(\"/\");\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <h1>Your selected connectors</h1>\n    <p>Add your customer number</p>\n    <div v-if=\"selectedItems.length\">\n      <div\n        class=\"integration-box\"\n        v-for=\"(item, index) in selectedItems\"\n        :key=\"index\"\n      >\n        <div>\n          {{ item }}\n          <br />\n          <input type=\"text\" v-model=\"userKeys[index]\" placeholder=\"api key\" />\n          <button @click=\"deleteItem(index)\">Delete Item</button>\n          <button @click=\"deleteData(item)\">Delete DB Instance</button>\n        </div>\n      </div>\n      <br />\n      <button @click=\"sendData\">Send Data</button>\n    </div>\n\n    <div v-else>\n      <p>No items selected</p>\n    </div>\n\n    <div>\n      <button @click=\"getData\">Show Data</button>\n      <button @click=\"navigateToHome\">Go back Home</button>\n      <button @click=\"proceedToNextPage\" :disabled=\"!data\">\n        Go to Dashboard\n      </button>\n    </div>\n    <BackResponse v-if=\"data || error\" :data=\"data\" :error=\"error\" />\n  </div>\n</template>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  margin-left: 24px;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  border: 1px solid #ccc;\n  margin: 5px 0;\n  width: 200px;\n}\n\n.integration-box {\n  padding-bottom: 15px;\n}\n\nbutton,\ninput {\n  margin-right: 5px;\n  margin-bottom: 5px;\n}\n</style>\n"],"mappings":";;;EAgFOA,KAAK,EAAC;AAAW;gEACpBC,mBAAA,CAAiC,YAA7B,0BAAwB;gEAC5BA,mBAAA,CAA+B,WAA5B,0BAAwB;;EAlF/BC,GAAA;AAAA;gEA2FUD,mBAAA,CAAM;mBA3FhB;mBAAA;mBAAA;gEAiGMA,mBAAA,CAAM;;EAjGZC,GAAA;AAAA;iEAsGMD,mBAAA,CAAwB,WAArB,mBAAiB;qBAApBE,WAAwB,C;oBAtG9B;;uBAgFEC,mBAAA,CAiCM,OAjCNC,UAiCM,GAhCJC,UAAiC,EACjCC,UAA+B,EACpBC,MAAA,CAAAC,aAAa,CAACC,MAAM,I,cAA/BN,mBAAA,CAgBM,OAnGVO,UAAA,I,kBAoFMP,mBAAA,CAYMQ,SAAA,QAhGZC,WAAA,CAsFgCL,MAAA,CAAAC,aAAa,EAtF7C,CAsFgBK,IAAI,EAAEC,KAAK;yBAFrBX,mBAAA,CAYM;MAXJJ,KAAK,EAAC,iBAAiB;MAEtBE,GAAG,EAAEa;QAENd,mBAAA,CAMM,cA/Fde,gBAAA,CAAAC,gBAAA,CA0FaH,IAAI,IAAG,GACV,iBAAAI,UAAM,E,gBACNjB,mBAAA,CAAqE;MAA9DkB,IAAI,EAAC,MAAM;MA5F5B,uBAAAC,MAAA,IA4FsCZ,MAAA,CAAAa,QAAQ,CAACN,KAAK,IAAAK,MAAA;MAAGE,WAAW,EAAC;4BA5FnEC,UAAA,I,cA4FsCf,MAAA,CAAAa,QAAQ,CAACN,KAAK,G,GAC1Cd,mBAAA,CAAuD;MAA9CuB,OAAK,EAAAJ,MAAA,IAAEZ,MAAA,CAAAiB,UAAU,CAACV,KAAK;OAAG,aAAW,iBA7FxDW,UAAA,GA8FUzB,mBAAA,CAA6D;MAApDuB,OAAK,EAAAJ,MAAA,IAAEZ,MAAA,CAAAmB,UAAU,CAACb,IAAI;OAAG,oBAAkB,iBA9F9Dc,UAAA,E;kCAiGMC,UAAM,EACN5B,mBAAA,CAA4C;IAAnCuB,OAAK,EAAEhB,MAAA,CAAAsB;EAAQ,GAAE,WAAS,E,oBAGrC1B,mBAAA,CAEM,OAvGV2B,WAAA,MAAAC,WAAA,KAyGI/B,mBAAA,CAMM,cALJA,mBAAA,CAA2C;IAAlCuB,OAAK,EAAEhB,MAAA,CAAAyB;EAAO,GAAE,WAAS,GAClChC,mBAAA,CAAqD;IAA5CuB,OAAK,EAAEhB,MAAA,CAAA0B;EAAc,GAAE,cAAY,GAC5CjC,mBAAA,CAES;IAFAuB,OAAK,EAAEhB,MAAA,CAAA2B,iBAAiB;IAAGC,QAAQ,GAAG5B,MAAA,CAAA6B;KAAM,mBAErD,iBA9GNC,WAAA,E,GAgHwB9B,MAAA,CAAA6B,IAAI,IAAI7B,MAAA,CAAA+B,KAAK,I,cAAjCC,YAAA,CAAiEhC,MAAA;IAhHrEN,GAAA;IAgHwCmC,IAAI,EAAE7B,MAAA,CAAA6B,IAAI;IAAGE,KAAK,EAAE/B,MAAA,CAAA+B;gDAhH5DE,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}