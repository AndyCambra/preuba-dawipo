{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport BackResponse from \"../../Connectors/Components/BackResponse.vue\";\nconst URL_BACK_CONNECTORS = \"http://localhost:3001/connectors\";\nexport default {\n  __name: 'SelectedItemsPage',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const route = useRoute();\n    const router = useRouter();\n    const selectedItems = ref([]);\n    try {\n      selectedItems.value = JSON.parse(route.query.droppedItems) || [];\n    } catch (e) {\n      console.error(\"Error parsing droppedItems:\", e);\n    }\n    const userKeys = ref([]);\n    const data = ref(null);\n    const error = ref(null);\n    const sendData = async () => {\n      const payload = selectedItems.value.map((name, index) => ({\n        name,\n        apiKey: userKeys.value[index] || \"\"\n      }));\n      try {\n        const response = await axios.put(`${URL_BACK_CONNECTORS}/update`, payload);\n        console.log(response.data);\n        data.value = response.data;\n      } catch (err) {\n        error.value = err;\n        console.error(err);\n      }\n    };\n    const getData = async () => {\n      try {\n        const response = await axios.get(URL_BACK_CONNECTORS);\n        data.value = response.data;\n      } catch (err) {\n        error.value = err;\n        console.error(err);\n      }\n    };\n    const deleteData = async item => {\n      try {\n        const response = await axios.delete(`${URL_BACK_CONNECTORS}/${item}`);\n        data.value = response.data;\n      } catch (err) {\n        error.value = err;\n        console.error(err);\n      }\n    };\n    const deleteItem = index => {\n      selectedItems.value.splice(index, 1);\n    };\n    const proceedToNextPage = () => {\n      if (data.value) {\n        router.push({\n          name: \"DashTest\",\n          query: {\n            droppedItems: JSON.stringify(selectedItems.value),\n            userKeys: JSON.stringify(userKeys.value)\n          }\n        });\n      }\n    };\n    const navigateToHome = () => {\n      router.push(\"/\");\n    };\n    const __returned__ = {\n      URL_BACK_CONNECTORS,\n      route,\n      router,\n      selectedItems,\n      userKeys,\n      data,\n      error,\n      sendData,\n      getData,\n      deleteData,\n      deleteItem,\n      proceedToNextPage,\n      navigateToHome,\n      ref,\n      get useRoute() {\n        return useRoute;\n      },\n      get useRouter() {\n        return useRouter;\n      },\n      get axios() {\n        return axios;\n      },\n      BackResponse\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","useRoute","useRouter","axios","BackResponse","URL_BACK_CONNECTORS","route","router","selectedItems","value","JSON","parse","query","droppedItems","e","console","error","userKeys","data","sendData","payload","map","name","index","apiKey","response","put","log","err","getData","get","deleteData","item","delete","deleteItem","splice","proceedToNextPage","push","stringify","navigateToHome"],"sources":["/home/vicente/Cosas/Programacion/prueba-dawipo/frontend/src/Connectors/Pages/SelectedItemsPage.vue"],"sourcesContent":["<script setup>\nimport { ref } from \"vue\";\nimport { useRoute, useRouter } from \"vue-router\";\nimport axios from \"axios\";\nimport BackResponse from \"../../Connectors/Components/BackResponse.vue\";\n\nconst URL_BACK_CONNECTORS = \"http://localhost:3001/connectors\";\n\nconst route = useRoute();\nconst router = useRouter();\n\nconst selectedItems = ref([]);\ntry {\n  selectedItems.value = JSON.parse(route.query.droppedItems) || [];\n} catch (e) {\n  console.error(\"Error parsing droppedItems:\", e);\n}\n\nconst userKeys = ref([]);\nconst data = ref(null);\nconst error = ref(null);\n\nconst sendData = async () => {\n  const payload = selectedItems.value.map((name, index) => ({\n    name,\n    apiKey: userKeys.value[index] || \"\",\n  }));\n\n  try {\n    const response = await axios.put(`${URL_BACK_CONNECTORS}/update`, payload);\n    console.log(response.data);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst getData = async () => {\n  try {\n    const response = await axios.get(URL_BACK_CONNECTORS);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst deleteData = async (item) => {\n  try {\n    const response = await axios.delete(`${URL_BACK_CONNECTORS}/${item}`);\n    data.value = response.data;\n  } catch (err) {\n    error.value = err;\n    console.error(err);\n  }\n};\n\nconst deleteItem = (index) => {\n  selectedItems.value.splice(index, 1);\n};\n\nconst proceedToNextPage = () => {\n  if (data.value) {\n    router.push({\n      name: \"DashTest\",\n      query: {\n        droppedItems: JSON.stringify(selectedItems.value),\n        userKeys: JSON.stringify(userKeys.value),\n      },\n    });\n  }\n};\n\nconst navigateToHome = () => {\n  router.push(\"/\");\n};\n</script>\n\n<template>\n  <div class=\"container\">\n    <h1>Your selected connectors</h1>\n    <p>Add your customer number</p>\n    <div v-if=\"selectedItems.length\">\n      <div\n        class=\"integration-box\"\n        v-for=\"(item, index) in selectedItems\"\n        :key=\"index\"\n      >\n        <div>\n          {{ item }}\n          <br />\n          <input type=\"text\" v-model=\"userKeys[index]\" placeholder=\"api key\" />\n          <button @click=\"deleteItem(index)\">Delete Item</button>\n          <button @click=\"deleteData(item)\">Delete DB Instance</button>\n        </div>\n      </div>\n      <br />\n      <button @click=\"sendData\">Send Data</button>\n    </div>\n\n    <div v-else>\n      <p>No items selected</p>\n    </div>\n\n    <div>\n      <button @click=\"getData\">Show Data</button>\n      <button @click=\"navigateToHome\">Go back Home</button>\n      <button @click=\"proceedToNextPage\" :disabled=\"!data\">\n        Go to Dashboard\n      </button>\n    </div>\n    <BackResponse v-if=\"data || error\" :data=\"data\" :error=\"error\" />\n  </div>\n</template>\n\n<style scoped>\n.container {\n  display: flex;\n  flex-direction: column;\n  align-items: left;\n  margin-left: 24px;\n}\n\nul {\n  list-style-type: none;\n  padding: 0;\n}\n\nli {\n  display: flex;\n  flex-direction: column;\n  padding: 10px;\n  border: 1px solid #ccc;\n  margin: 5px 0;\n  width: 200px;\n}\n\n.integration-box {\n  padding-bottom: 15px;\n}\n\nbutton,\ninput {\n  margin-right: 5px;\n  margin-bottom: 5px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}