{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createVNode as _createVNode, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = /*#__PURE__*/_createElementVNode(\"h1\", null, \"Dashboard\", -1 /* HOISTED */);\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"p\", null, \"Seleccioná y arrastrá los elementos a la zona de soltar.\", -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"drag-section\"\n};\nconst _hoisted_5 = {\n  class: \"drag-inside\"\n};\nconst _hoisted_6 = [\"onDragstart\", \"draggable\"];\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"h2\", null, \"Soltar acá\", -1 /* HOISTED */);\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_hoisted_2, _hoisted_3, _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.groupedItems, (items, courier) => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"drag-container\",\n      key: courier\n    }, [_createElementVNode(\"h3\", null, _toDisplayString(courier), 1 /* TEXT */), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(items, (item, index) => {\n      return _openBlock(), _createElementBlock(\"div\", {\n        key: index,\n        class: _normalizeClass({\n          'drag-el': true,\n          disabled: $setup.itemIsDropped(item)\n        }),\n        onDragstart: $event => $setup.startDrag($event, item),\n        draggable: !$setup.itemIsDropped(item)\n      }, _toDisplayString(item.name), 43 /* TEXT, CLASS, PROPS, NEED_HYDRATION */, _hoisted_6);\n    }), 128 /* KEYED_FRAGMENT */))]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createElementVNode(\"div\", {\n    class: \"drop-area\",\n    onDragover: _cache[0] || (_cache[0] = _withModifiers(() => {}, [\"prevent\"])),\n    onDrop: $setup.onDrop\n  }, [_hoisted_7, $setup.droppedItems.length ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"button\", {\n    class: \"btn-danger\",\n    onClick: $setup.removeItems\n  }, \" Eliminar Seleccionados (\" + _toDisplayString($setup.selectedCount) + \") \", 1 /* TEXT */), _createVNode($setup[\"AgGridVue\"], {\n    class: \"ag-theme-alpine\",\n    style: {\n      \"width\": \"100%\",\n      \"height\": \"400px\"\n    },\n    columnDefs: $setup.columnDefs,\n    rowData: $setup.droppedItems,\n    defaultColDef: $setup.defaultColDef,\n    rowSelection: $setup.rowSelection,\n    onGridReady: _ctx.onGridReady,\n    onSelectionChanged: $setup.onSelectionChanged\n  }, null, 8 /* PROPS */, [\"rowData\", \"rowSelection\", \"onGridReady\"])])) : (_openBlock(), _createElementBlock(\"p\", _hoisted_9, \"No items dropped\"))], 32 /* NEED_HYDRATION */)]), _createElementVNode(\"button\", {\n    onClick: $setup.navigateToHome\n  }, \" Go to Home \"), _createElementVNode(\"button\", {\n    onClick: $setup.navigateToConnectors\n  }, \" Go to Connectors \")]);\n}","map":{"version":3,"names":["class","_createElementVNode","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_Fragment","_renderList","$setup","groupedItems","items","courier","_toDisplayString","item","index","_normalizeClass","disabled","itemIsDropped","onDragstart","$event","startDrag","draggable","name","_hoisted_6","onDragover","_cache","_withModifiers","onDrop","_hoisted_7","droppedItems","length","_hoisted_8","onClick","removeItems","selectedCount","_createVNode","style","columnDefs","rowData","defaultColDef","rowSelection","onGridReady","_ctx","onSelectionChanged","_hoisted_9","navigateToHome","navigateToConnectors"],"sources":["/home/vicente/Cosas/Programacion/prueba-dawipo/frontend/src/Dashboard/Pages/DashTest.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, watch, reactive, computed } from \"vue\";\nimport { AgGridVue } from \"ag-grid-vue3\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\nconst URL_BACK_PRODUCTS = \"http://localhost:3001/products\";\n\nconst router = useRouter();\n\nconst columnDefs = [\n  {\n    field: \"Seleccionar\",\n    maxWidth: 140,\n    checkboxSelection: true,\n    headerCheckboxSelection: true,\n  },\n  {\n    headerName: \"Transportista\",\n    field: \"courier\",\n    sortable: true,\n    filter: true,\n  },\n  { headerName: \"Nombre\", field: \"name\", sortable: true, filter: true },\n  {\n    headerName: \"País de origen\",\n    field: \"originCountry\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"País de destino\",\n    field: \"finalCountry\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"Fecha de salida\",\n    field: \"departureDate\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"Fecha de llegada\",\n    field: \"arrivalDate\",\n    sortable: true,\n    filter: true,\n  },\n  { headerName: \"Estado\", field: \"status\", sortable: true, filter: true },\n  { headerName: \"Proveedor\", field: \"provider\", sortable: true, filter: true },\n];\n\nconst defaultColDef = {\n  flex: 1,\n  minWidth: 100,\n  resizable: true,\n};\n\nconst rowSelection = ref(\"multiple\");\n\nconst dataModel = ref([]);\nconst droppedItems = ref([]);\nconst selectedItems = ref([]);\nconst groupedItems = reactive({});\n\nconst getData = async () => {\n  try {\n    const response = await axios.get(URL_BACK_PRODUCTS);\n    const data = response.data;\n    dataModel.value = data.products;\n    droppedItems.value = data.products;\n    console.log(data);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nonMounted(() => {\n  getData().then(() => {\n    Object.assign(\n      groupedItems,\n      dataModel.value.reduce((groups, item) => {\n        if (!item) return groups;\n        const group = groups[item.courier] || [];\n        group.push(item);\n        groups[item.courier] = group;\n        return groups;\n      }, {}),\n    );\n  });\n});\n\nconst startDrag = (event, item) => {\n  event.dataTransfer.setData(\"text/plain\", JSON.stringify(item));\n};\n\nconst onDrop = (event) => {\n  event.preventDefault();\n  const item = JSON.parse(event.dataTransfer.getData(\"text/plain\"));\n  handleDrop(item);\n};\n\nconst handleDrop = (item) => {\n  droppedItems.value.push({ ...item });\n  droppedItems.value = droppedItems.value.slice();\n};\n\nconst itemIsDropped = (item) => {\n  return droppedItems.value.some(\n    (droppedItem) =>\n      droppedItem.name === item.name && droppedItem.courier === item.courier,\n  );\n};\n\nconst removeItems = () => {\n  droppedItems.value = droppedItems.value.filter(\n    (item) => !selectedItems.value.includes(item),\n  );\n  selectedItems.value = [];\n};\n\nconst onSelectionChanged = (event) => {\n  selectedItems.value = event.api.getSelectedRows();\n};\n\nconst navigateToHome = () => {\n  router.push(\"/\");\n};\nconst navigateToConnectors = () => {\n  router.push('/manage-connectors');\n};\n\nconst selectedCount = computed(() => {\n  return selectedItems.value.length;\n});\n\nwatch(dataModel, (newValue) => {\n  Object.assign(\n    groupedItems,\n    newValue.reduce((groups, item) => {\n      if (!item) return groups;\n      const group = groups[item.courier] || [];\n      group.push(item);\n      groups[item.courier] = group;\n      return groups;\n    }, {}),\n  );\n});\n</script>\n\n<template>\n  <div class=\"container\">\n    <h1>Dashboard</h1>\n    <p>Seleccioná y arrastrá los elementos a la zona de soltar.</p>\n    <div class=\"drag-section\">\n      <div class=\"drag-inside\">\n        <div\n          class=\"drag-container\"\n          v-for=\"(items, courier) in groupedItems\"\n          :key=\"courier\"\n        >\n          <h3>{{ courier }}</h3>\n          <div\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            :class=\"{ 'drag-el': true, disabled: itemIsDropped(item) }\"\n            @dragstart=\"startDrag($event, item)\"\n            :draggable=\"!itemIsDropped(item)\"\n          >\n            {{ item.name }}\n          </div>\n        </div>\n      </div>\n      <div class=\"drop-area\" @dragover.prevent @drop=\"onDrop\">\n        <h2>Soltar acá</h2>\n        <div v-if=\"droppedItems.length\">\n          <button class=\"btn-danger\" @click=\"removeItems\">\n            Eliminar Seleccionados ({{ selectedCount }})\n          </button>\n          <ag-grid-vue\n            class=\"ag-theme-alpine\"\n            style=\"width: 100%; height: 400px\"\n            :columnDefs=\"columnDefs\"\n            :rowData=\"droppedItems\"\n            :defaultColDef=\"defaultColDef\"\n            :rowSelection=\"rowSelection\"\n            @grid-ready=\"onGridReady\"\n            @selection-changed=\"onSelectionChanged\"\n          ></ag-grid-vue>\n        </div>\n        <p v-else>No items dropped</p>\n      </div>\n    </div>\n\n    <button @click=\"navigateToHome\">\n      Go to Home\n    </button>\n    <button @click=\"navigateToConnectors\">\n      Go to Connectors\n    </button>\n\n  </div>\n</template>\n\n<style>\n.container {\n  padding: 20px;\n}\n.drag-section {\n  display: flex;\n}\n.drag-inside {\n  display: flex;\n  flex-wrap: wrap;\n}\n.drag-container {\n  margin-right: 20px;\n}\n.drag-el {\n  padding: 10px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n  cursor: move;\n}\n.drag-el.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.drop-area {\n  flex-grow: 1;\n  padding: 20px;\n  border: 2px dashed #ccc;\n  background-color: #fafafa;\n}\n.btn-danger {\n  background-color: red;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  margin-top: 10px;\n  cursor: pointer;\n}\n.btn-danger:hover {\n  background-color: darkred;\n}\n</style>\n"],"mappings":";;EAuJOA,KAAK,EAAC;AAAW;gCACpBC,mBAAA,CAAkB,YAAd,WAAS;gCACbA,mBAAA,CAA+D,WAA5D,0DAAwD;;EACtDD,KAAK,EAAC;AAAc;;EAClBA,KAAK,EAAC;AAAa;mBA3J9B;gCA8KQC,mBAAA,CAAmB,YAAf,YAAU;;EA9KtBC,GAAA;AAAA;;EAAAA,GAAA;AAAA;;uBAuJEC,mBAAA,CAkDM,OAlDNC,UAkDM,GAjDJC,UAAkB,EAClBC,UAA+D,EAC/DL,mBAAA,CAsCM,OAtCNM,UAsCM,GArCJN,mBAAA,CAiBM,OAjBNO,UAiBM,I,kBAhBJL,mBAAA,CAeMM,SAAA,QA3KdC,WAAA,CA8JqCC,MAAA,CAAAC,YAAY,EA9JjD,CA8JkBC,KAAK,EAAEC,OAAO;yBAFxBX,mBAAA,CAeM;MAdJH,KAAK,EAAC,gBAAgB;MAErBE,GAAG,EAAEY;QAENb,mBAAA,CAAsB,YAAAc,gBAAA,CAAfD,OAAO,mB,kBACdX,mBAAA,CAQMM,SAAA,QA1KhBC,WAAA,CAmKoCG,KAAK,EAnKzC,CAmKoBG,IAAI,EAAEC,KAAK;2BADrBd,mBAAA,CAQM;QANHD,GAAG,EAAEe,KAAK;QACVjB,KAAK,EArKlBkB,eAAA;UAAA;UAAAC,QAAA,EAqKiDR,MAAA,CAAAS,aAAa,CAACJ,IAAI;QAAA;QACtDK,WAAS,EAAAC,MAAA,IAAEX,MAAA,CAAAY,SAAS,CAACD,MAAM,EAAEN,IAAI;QACjCQ,SAAS,GAAGb,MAAA,CAAAS,aAAa,CAACJ,IAAI;0BAE5BA,IAAI,CAACS,IAAI,gDAzKxBC,UAAA;;oCA6KMzB,mBAAA,CAkBM;IAlBDD,KAAK,EAAC,WAAW;IAAE2B,UAAQ,EAAAC,MAAA,QAAAA,MAAA,MA7KtCC,cAAA,CA6K6B,QAAiB;IAAEC,MAAI,EAAEnB,MAAA,CAAAmB;MAC9CC,UAAmB,EACRpB,MAAA,CAAAqB,YAAY,CAACC,MAAM,I,cAA9B9B,mBAAA,CAcM,OA7Ld+B,UAAA,GAgLUjC,mBAAA,CAES;IAFDD,KAAK,EAAC,YAAY;IAAEmC,OAAK,EAAExB,MAAA,CAAAyB;KAAa,2BACtB,GAAArB,gBAAA,CAAGJ,MAAA,CAAA0B,aAAa,IAAG,IAC7C,iBACAC,YAAA,CASe3B,MAAA;IARbX,KAAK,EAAC,iBAAiB;IACvBuC,KAAkC,EAAlC;MAAA;MAAA;IAAA,CAAkC;IACjCC,UAAU,EAAE7B,MAAA,CAAA6B,UAAU;IACtBC,OAAO,EAAE9B,MAAA,CAAAqB,YAAY;IACrBU,aAAa,EAAE/B,MAAA,CAAA+B,aAAa;IAC5BC,YAAY,EAAEhC,MAAA,CAAAgC,YAAY;IAC1BC,WAAU,EAAEC,IAAA,CAAAD,WAAW;IACvBE,kBAAiB,EAAEnC,MAAA,CAAAmC;0FAGxB3C,mBAAA,CAA8B,KA9LtC4C,UAAA,EA8LkB,kBAAgB,G,8BAI9B9C,mBAAA,CAES;IAFAkC,OAAK,EAAExB,MAAA,CAAAqC;EAAc,GAAE,cAEhC,GACA/C,mBAAA,CAES;IAFAkC,OAAK,EAAExB,MAAA,CAAAsC;EAAoB,GAAE,oBAEtC,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}