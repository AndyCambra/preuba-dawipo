{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted, watch, reactive, computed } from \"vue\";\nimport { AgGridVue } from \"ag-grid-vue3\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\nconst URL_BACK_PRODUCTS = \"http://localhost:3001/products\";\nexport default {\n  __name: 'DashTest',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const router = useRouter();\n    const columnDefs = [{\n      field: \"Seleccionar\",\n      maxWidth: 140,\n      checkboxSelection: true,\n      headerCheckboxSelection: true\n    }, {\n      headerName: \"Transportista\",\n      field: \"courier\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"Nombre\",\n      field: \"name\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"País de origen\",\n      field: \"originCountry\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"País de destino\",\n      field: \"finalCountry\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"Fecha de salida\",\n      field: \"departureDate\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"Fecha de llegada\",\n      field: \"arrivalDate\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"Estado\",\n      field: \"status\",\n      sortable: true,\n      filter: true\n    }, {\n      headerName: \"Proveedor\",\n      field: \"provider\",\n      sortable: true,\n      filter: true\n    }];\n    const defaultColDef = {\n      flex: 1,\n      minWidth: 100,\n      resizable: true\n    };\n    const rowSelection = ref(\"multiple\");\n    const dataModel = ref([]);\n    const droppedItems = ref([]);\n    const selectedItems = ref([]);\n    const groupedItems = reactive({});\n    const getData = async () => {\n      try {\n        const response = await axios.get(URL_BACK_PRODUCTS);\n        const data = response.data;\n        dataModel.value = data.products;\n        droppedItems.value = data.products;\n        console.log(data);\n      } catch (err) {\n        console.error(err);\n      }\n    };\n    onMounted(() => {\n      getData().then(() => {\n        Object.assign(groupedItems, dataModel.value.reduce((groups, item) => {\n          if (!item) return groups;\n          const group = groups[item.courier] || [];\n          group.push(item);\n          groups[item.courier] = group;\n          return groups;\n        }, {}));\n      });\n    });\n    const startDrag = (event, item) => {\n      event.dataTransfer.setData(\"text/plain\", JSON.stringify(item));\n    };\n    const onDrop = event => {\n      event.preventDefault();\n      const item = JSON.parse(event.dataTransfer.getData(\"text/plain\"));\n      handleDrop(item);\n    };\n    const handleDrop = item => {\n      droppedItems.value.push({\n        ...item\n      });\n      droppedItems.value = droppedItems.value.slice();\n    };\n    const itemIsDropped = item => {\n      return droppedItems.value.some(droppedItem => droppedItem.name === item.name && droppedItem.courier === item.courier);\n    };\n    const removeItems = () => {\n      droppedItems.value = droppedItems.value.filter(item => !selectedItems.value.includes(item));\n      selectedItems.value = [];\n    };\n    const onSelectionChanged = event => {\n      selectedItems.value = event.api.getSelectedRows();\n    };\n    const navigateToHome = () => {\n      router.push(\"/\");\n    };\n    const navigateToConnectors = () => {\n      router.push(\"/manage-connectors\");\n    };\n    const selectedCount = computed(() => {\n      return selectedItems.value.length;\n    });\n    watch(dataModel, newValue => {\n      Object.assign(groupedItems, newValue.reduce((groups, item) => {\n        if (!item) return groups;\n        const group = groups[item.courier] || [];\n        group.push(item);\n        groups[item.courier] = group;\n        return groups;\n      }, {}));\n    });\n    const __returned__ = {\n      URL_BACK_PRODUCTS,\n      router,\n      columnDefs,\n      defaultColDef,\n      rowSelection,\n      dataModel,\n      droppedItems,\n      selectedItems,\n      groupedItems,\n      getData,\n      startDrag,\n      onDrop,\n      handleDrop,\n      itemIsDropped,\n      removeItems,\n      onSelectionChanged,\n      navigateToHome,\n      navigateToConnectors,\n      selectedCount,\n      ref,\n      onMounted,\n      watch,\n      reactive,\n      computed,\n      get AgGridVue() {\n        return AgGridVue;\n      },\n      get axios() {\n        return axios;\n      },\n      get useRouter() {\n        return useRouter;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","watch","reactive","computed","AgGridVue","axios","useRouter","URL_BACK_PRODUCTS","router","columnDefs","field","maxWidth","checkboxSelection","headerCheckboxSelection","headerName","sortable","filter","defaultColDef","flex","minWidth","resizable","rowSelection","dataModel","droppedItems","selectedItems","groupedItems","getData","response","get","data","value","products","console","log","err","error","then","Object","assign","reduce","groups","item","group","courier","push","startDrag","event","dataTransfer","setData","JSON","stringify","onDrop","preventDefault","parse","handleDrop","slice","itemIsDropped","some","droppedItem","name","removeItems","includes","onSelectionChanged","api","getSelectedRows","navigateToHome","navigateToConnectors","selectedCount","length","newValue"],"sources":["/home/vicente/Cosas/Programacion/prueba-dawipo/frontend/src/Dashboard/Pages/DashTest.vue"],"sourcesContent":["<script setup>\nimport { ref, onMounted, watch, reactive, computed } from \"vue\";\nimport { AgGridVue } from \"ag-grid-vue3\";\nimport axios from \"axios\";\nimport { useRouter } from \"vue-router\";\n\nconst URL_BACK_PRODUCTS = \"http://localhost:3001/products\";\n\nconst router = useRouter();\n\nconst columnDefs = [\n  {\n    field: \"Seleccionar\",\n    maxWidth: 140,\n    checkboxSelection: true,\n    headerCheckboxSelection: true,\n  },\n  {\n    headerName: \"Transportista\",\n    field: \"courier\",\n    sortable: true,\n    filter: true,\n  },\n  { headerName: \"Nombre\", field: \"name\", sortable: true, filter: true },\n  {\n    headerName: \"País de origen\",\n    field: \"originCountry\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"País de destino\",\n    field: \"finalCountry\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"Fecha de salida\",\n    field: \"departureDate\",\n    sortable: true,\n    filter: true,\n  },\n  {\n    headerName: \"Fecha de llegada\",\n    field: \"arrivalDate\",\n    sortable: true,\n    filter: true,\n  },\n  { headerName: \"Estado\", field: \"status\", sortable: true, filter: true },\n  { headerName: \"Proveedor\", field: \"provider\", sortable: true, filter: true },\n];\n\nconst defaultColDef = {\n  flex: 1,\n  minWidth: 100,\n  resizable: true,\n};\n\nconst rowSelection = ref(\"multiple\");\n\nconst dataModel = ref([]);\nconst droppedItems = ref([]);\nconst selectedItems = ref([]);\nconst groupedItems = reactive({});\n\nconst getData = async () => {\n  try {\n    const response = await axios.get(URL_BACK_PRODUCTS);\n    const data = response.data;\n    dataModel.value = data.products;\n    droppedItems.value = data.products;\n    console.log(data);\n  } catch (err) {\n    console.error(err);\n  }\n};\n\nonMounted(() => {\n  getData().then(() => {\n    Object.assign(\n      groupedItems,\n      dataModel.value.reduce((groups, item) => {\n        if (!item) return groups;\n        const group = groups[item.courier] || [];\n        group.push(item);\n        groups[item.courier] = group;\n        return groups;\n      }, {}),\n    );\n  });\n});\n\nconst startDrag = (event, item) => {\n  event.dataTransfer.setData(\"text/plain\", JSON.stringify(item));\n};\n\nconst onDrop = (event) => {\n  event.preventDefault();\n  const item = JSON.parse(event.dataTransfer.getData(\"text/plain\"));\n  handleDrop(item);\n};\n\nconst handleDrop = (item) => {\n  droppedItems.value.push({ ...item });\n  droppedItems.value = droppedItems.value.slice();\n};\n\nconst itemIsDropped = (item) => {\n  return droppedItems.value.some(\n    (droppedItem) =>\n      droppedItem.name === item.name && droppedItem.courier === item.courier,\n  );\n};\n\nconst removeItems = () => {\n  droppedItems.value = droppedItems.value.filter(\n    (item) => !selectedItems.value.includes(item),\n  );\n  selectedItems.value = [];\n};\n\nconst onSelectionChanged = (event) => {\n  selectedItems.value = event.api.getSelectedRows();\n};\n\nconst navigateToHome = () => {\n  router.push(\"/\");\n};\nconst navigateToConnectors = () => {\n  router.push(\"/manage-connectors\");\n};\n\nconst selectedCount = computed(() => {\n  return selectedItems.value.length;\n});\n\nwatch(dataModel, (newValue) => {\n  Object.assign(\n    groupedItems,\n    newValue.reduce((groups, item) => {\n      if (!item) return groups;\n      const group = groups[item.courier] || [];\n      group.push(item);\n      groups[item.courier] = group;\n      return groups;\n    }, {}),\n  );\n});\n</script>\n\n<template>\n  <div class=\"container\">\n    <h1>Dashboard</h1>\n    <p>Seleccioná y arrastrá los elementos a la zona de soltar.</p>\n    <div class=\"drag-section\">\n      <div class=\"drag-inside\">\n        <div\n          class=\"drag-container\"\n          v-for=\"(items, courier) in groupedItems\"\n          :key=\"courier\"\n        >\n          <h3>{{ courier }}</h3>\n          <div\n            v-for=\"(item, index) in items\"\n            :key=\"index\"\n            :class=\"{ 'drag-el': true, disabled: itemIsDropped(item) }\"\n            @dragstart=\"startDrag($event, item)\"\n            :draggable=\"!itemIsDropped(item)\"\n          >\n            {{ item.name }}\n          </div>\n        </div>\n      </div>\n      <div class=\"drop-area\" @dragover.prevent @drop=\"onDrop\">\n        <h2>Soltar acá</h2>\n        <div v-if=\"droppedItems.length\">\n          <button class=\"btn-danger\" @click=\"removeItems\">\n            Eliminar Seleccionados ({{ selectedCount }})\n          </button>\n          <ag-grid-vue\n            class=\"ag-theme-alpine\"\n            style=\"width: 100%; height: 400px\"\n            :columnDefs=\"columnDefs\"\n            :rowData=\"droppedItems\"\n            :defaultColDef=\"defaultColDef\"\n            :rowSelection=\"rowSelection\"\n            @grid-ready=\"onGridReady\"\n            @selection-changed=\"onSelectionChanged\"\n          ></ag-grid-vue>\n        </div>\n        <p v-else>No items dropped</p>\n      </div>\n    </div>\n\n    <button @click=\"navigateToHome\">Go to Home</button>\n    <button @click=\"navigateToConnectors\">Go to Connectors</button>\n  </div>\n</template>\n\n<style>\n.container {\n  padding: 20px;\n}\n.drag-section {\n  display: flex;\n}\n.drag-inside {\n  display: flex;\n  flex-wrap: wrap;\n}\n.drag-container {\n  margin-right: 20px;\n}\n.drag-el {\n  padding: 10px;\n  margin-bottom: 10px;\n  border: 1px solid #ccc;\n  background-color: #f9f9f9;\n  cursor: move;\n}\n.drag-el.disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n.drop-area {\n  flex-grow: 1;\n  padding: 20px;\n  border: 2px dashed #ccc;\n  background-color: #fafafa;\n}\n.btn-danger {\n  background-color: red;\n  color: white;\n  border: none;\n  padding: 10px 20px;\n  margin-top: 10px;\n  cursor: pointer;\n}\n.btn-danger:hover {\n  background-color: darkred;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}